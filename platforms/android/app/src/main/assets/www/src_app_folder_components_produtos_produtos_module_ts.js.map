{"version":3,"sources":["./src/app/folder/components/produtos/produtos-routing.module.ts","./src/app/folder/components/produtos/produtos.module.ts","./src/app/folder/components/produtos/produtos.page.ts","./src/app/folder/components/produtos/produtos.page.scss","./src/app/folder/components/produtos/produtos.page.html"],"names":[],"mappings":"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","file":"src_app_folder_components_produtos_produtos_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProdutosPage } from './produtos.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProdutosPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProdutosPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProdutosPageRoutingModule } from './produtos-routing.module';\r\n\r\nimport { ProdutosPage } from './produtos.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProdutosPageRoutingModule\r\n  ],\r\n  declarations: [ProdutosPage]\r\n})\r\nexport class ProdutosPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { LoadingController, NavController, NavParams } from '@ionic/angular';\r\nimport { API_CONFIG } from 'src/config/api.config';\r\nimport { ProdutoDTO } from 'src/models/produto.dto';\r\nimport { ProdutoService } from 'src/services/domain/produto.service';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-produtos',\r\n  templateUrl: './produtos.page.html',\r\n  styleUrls: ['./produtos.page.scss'],\r\n  providers: [NavParams] //tem q colocar para carregar a pagina\r\n})\r\nexport class ProdutosPage implements OnInit {\r\n\r\n  page: number =0;\r\n\r\n  items: ProdutoDTO[] = [];\r\n  loading: any;\r\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public produtoService: ProdutoService,\r\n    public activateRoute: ActivatedRoute,\r\n    public router: Router,\r\n    public route: ActivatedRoute,\r\n    public loadingCtrl: LoadingController) { }\r\n\r\n  ngOnInit() {\r\n    this.carregarDados();\r\n\r\n    \r\n\r\n  }\r\n\r\n  carregarDados(){\r\n    //Recebe os parametros de categoria.page para mostrar os produtos\r\n    let categoria_id = this.activateRoute.snapshot.paramMap.get('data');\r\n    this.showLoader();\r\n    this.produtoService.encontrarPorCategoria(categoria_id, this.page, 10)  // busca os produtos de 10 em 10\r\n    .subscribe(response => {\r\n      let inicio = this.items.length;\r\n      this.items = this.items.concat(response['content']); //carrega os dados da pagina anterior\r\n      this.stopLoader() //retira a tela de loading apos carregar os dados da pagina anterior\r\n      let fim = this.items.length - 1; //posicao final da lista\r\n      this.carregarImagemUrls(inicio, fim);\r\n      console.log(this.page)\r\n      console.log(this.items)\r\n    },\r\n    error => {});\r\n  }\r\n\r\n  carregarImagemUrls(inicio: number, fim: number) {\r\n    for (var i=inicio; i<fim; i++) {\r\n      let item = this.items[i];\r\n      this.produtoService.getImagemPequenaBucked(item.id) //pega o id do produto e procura uma small-image com msm id\r\n        .subscribe(response => {\r\n          item.imageUrl = `${API_CONFIG.bucketAWSUrl}/prod${item.id}-small.jpg`;\r\n        },\r\n        error => {});\r\n    }\r\n  }\r\n  \r\n  mostrarDetalhe(produto_id: string){\r\n    let data = JSON.stringify(produto_id);\r\n    this.router.navigate(['../produto-detalhado',{data}],{relativeTo: this.route});\r\n  }\r\n\r\n  async showLoader(){ //metodo usado em requisicoes q podem demorar, gerando a tela de Loading...\r\n    const loading = await this.loadingCtrl.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Aguarde...',\r\n      duration: 500\r\n    });\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n  }\r\n\r\n  stopLoader() { //metodo para parar a tela de loading... Normalmente usada apos o metodo de carregar componentes externos\r\n    //nao esta funcionando perfeitamente no IONIC 5\r\n  }\r\n\r\n\r\n  doRefresh(event) { //metodo para animacao qdo a pagina estiver carregando\r\n    this.page = 0;\r\n    this.items = [];\r\n    this.carregarDados();\r\n    setTimeout(() => {\r\n      event.target.complete();\r\n    }, 1000);\r\n  }\r\n\r\n  loadData(event) { //Metodo que carrega o infinit scroll\r\n    this.page++; \r\n    this.carregarDados();\r\n    setTimeout(() => {\r\n      console.log('Done');\r\n      event.target.complete();\r\n\r\n    }, 500);\r\n  }\r\n\r\n  toggleInfiniteScroll() {\r\n    this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\r\n  }\r\n  \r\n\r\n}\r\n","export default \"ion-icon {\\n  font-size: 300%;\\n  margin-left: 15px;\\n  color: blue;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1dG9zLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7QUFDSiIsImZpbGUiOiJwcm9kdXRvcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbntcclxuICAgIGZvbnQtc2l6ZTogMzAwJTtcclxuICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAgY29sb3I6IGJsdWU7XHJcbn0iXX0= */\";","export default \"<!-- Barra superiro do Menu -->\\r\\n<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"categorias\\\"></ion-back-button> <!-- botao de voltar, colocar a referencia da pagina --> \\r\\n    </ion-buttons>\\r\\n    <ion-title>Produtos</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  \\r\\n  <ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" edge slot=\\\"fixed\\\">\\r\\n    <ion-fab-button>\\r\\n      <ion-icon routerLink=\\\"/folder/components/carrinho\\\" name=\\\"cart\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n  <ion-item *ngFor=\\\"let item of items\\\" (click)=\\\"mostrarDetalhe(item.id)\\\">\\r\\n    <ion-thumbnail slot=\\\"start\\\">\\r\\n      <img [src]=\\\"item.imageUrl || 'assets/imgs/prod.jpg'\\\">\\r\\n    </ion-thumbnail>\\r\\n    <ion-label>{{item.nome}}</ion-label>\\r\\n    <ion-label>{{item.preco | currency}}</ion-label>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"Loading more data...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<!-- <ion-content padding>\\r\\n  <ion-list>\\r\\n    <button ion-item *ngFor=\\\"let item of items\\\">\\r\\n      <ion-thumbnail item-start>\\r\\n        <img [src]=\\\"item.imageUrl || 'assets/imgs/prod.jpg'\\\">\\r\\n      </ion-thumbnail>\\r\\n      <h2>{{item.nome}}</h2>\\r\\n      <p>{{item.preco | currency}}</p>\\r\\n    </button>\\r\\n  </ion-list>\\r\\n</ion-content> -->\";"],"sourceRoot":"webpack:///"}