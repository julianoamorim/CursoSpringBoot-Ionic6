(self.webpackChunkcursosprinonic=self.webpackChunkcursosprinonic||[]).push([[6402],{6402:(e,n,t)=>{"use strict";t.r(n),t.d(n,{ProfilePageModule:()=>q});var r=t(1116),o=t(1462),i=t(8809),a=t(2782),c=t(4762),s=t(8486),u=t(8619),l=t(801),d=t(8171),f=t(8318),g=t(7254),p={error:"cordova_not_available"},h={error:"plugin_not_installed"};function m(e){if("undefined"!=typeof window&&window.angular){var n=window.document,t=window.angular.element(n.querySelector("[ng-app]")||n.body).injector();if(t)return t.get("$q")(function(n,t){e(n,t)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(n,t){e(n,t)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function v(e,n,t,r){var o,i;void 0===r&&(r={});var a=m(function(a,c){o=r.destruct?A(e,n,t,r,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a(e)},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return c(e)}):A(e,n,t,r,a,c),i=c});return o&&o.error&&(a.catch(function(){}),"function"==typeof i&&i(o.error)),a}function w(e,n,t,r){return void 0===r&&(r={}),m(function(o,i){var a=A(e,n,t,r);a?a.error?i(a.error):a.then&&a.then(o).catch(i):i({error:"unexpected_error"})})}function y(e,n,t,r){return void 0===r&&(r={}),new f.y(function(o){var i;return(i=r.destruct?A(e,n,t,r,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.next(e)},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.error(e)}):A(e,n,t,r,o.next.bind(o),o.error.bind(o)))&&i.error&&(o.error(i.error),o.complete()),function(){try{if(r.clearFunction)return r.clearWithArgs?A(e,r.clearFunction,t,r,o.next.bind(o),o.error.bind(o)):A(e,r.clearFunction,[])}catch(i){console.warn("Unable to clear the previous observable watch for",e.constructor.getPluginName(),n),console.warn(i)}}})}function b(e,n){return n="undefined"!=typeof window&&n?P(window,n):n||("undefined"!=typeof window?window:{}),(0,g.R)(n,e)}function T(e,n,t){var r,o,i;return"string"==typeof e?r=e:(r=e.constructor.getPluginRef(),t=e.constructor.getPluginName(),i=e.constructor.getPluginInstallName()),!(!(o=I(r))||n&&void 0===o[n])||("undefined"!=typeof window&&window.cordova?(function(e,n,t){t?console.warn("Native: tried calling "+e+"."+t+", but the "+e+" plugin is not installed."):console.warn("Native: tried accessing the "+e+" plugin but it's not installed."),n&&console.warn("Install the "+e+" plugin: 'ionic cordova plugin add "+n+"'")}(t,i,n),h):(function(e,n){"undefined"==typeof process&&(n?console.warn("Native: tried calling "+e+"."+n+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"):console.warn("Native: tried accessing the "+e+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"))}(t,n),p))}function A(e,n,t,r,o,i){void 0===r&&(r={}),t=function(e,n,t,r){if(void 0===n&&(n={}),n.sync)return e;if("reverse"===n.callbackOrder)e.unshift(r),e.unshift(t);else if("node"===n.callbackStyle)e.push(function(e,n){e?r(e):t(n)});else if("object"===n.callbackStyle&&n.successName&&n.errorName){var o={};o[n.successName]=t,o[n.errorName]=r,e.push(o)}else if(void 0!==n.successIndex||void 0!==n.errorIndex){var i=function(){n.successIndex>e.length?e[n.successIndex]=t:e.splice(n.successIndex,0,t)},a=function(){n.errorIndex>e.length?e[n.errorIndex]=r:e.splice(n.errorIndex,0,r)};n.successIndex>n.errorIndex?(a(),i()):(i(),a())}else e.push(t),e.push(r);return e}(t,r,o,i);var a=T(e,n);if(!0===a){var c=I(e.constructor.getPluginRef());return c[n].apply(c,t)}return a}function I(e){return"undefined"!=typeof window?P(window,e):null}function P(e,n){for(var t=n.split("."),r=e,o=0;o<t.length;o++){if(!r)return null;r=r[t[o]]}return r}var x=function(){function e(){}return e.installed=function(){return!0===T(this.pluginRef)},e.getPlugin=function(){return"undefined"!=typeof window?function(e,n){for(var t=n.split("."),r=e,o=0;o<t.length;o++){if(!r)return null;r=r[t[o]]}return r}(window,this.pluginRef):null},e.getPluginName=function(){return this.pluginName},e.getPluginRef=function(){return this.pluginRef},e.getPluginInstallName=function(){return this.plugin},e.getSupportedPlatforms=function(){return this.platforms},e.pluginName="",e.pluginRef="",e.plugin="",e.repo="",e.platforms=[],e.install="",e}();function Z(e,n,t,r){return function(e,n,t){return void 0===t&&(t={}),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.sync?A(e,n,r,t):t.observable?y(e,n,r,t):t.eventObservable&&t.event?b(t.event,t.element):t.otherPromise?w(e,n,r,t):v(e,n,r,t)}}(e,n,t).apply(this,r)}!function(){if("undefined"==typeof process){var e="undefined"!=typeof window?window:{},n=Date.now(),t=!1;e.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-n)+" ms"),t=!0}),setTimeout(function(){!t&&e.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var R=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},n.EncodingType={JPEG:0,PNG:1},n.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},n.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},n.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},n.Direction={BACK:0,FRONT:1},n}return(0,c.ZT)(n,e),n.prototype.getPicture=function(e){return Z(this,"getPicture",{callbackOrder:"reverse"},arguments)},n.prototype.cleanup=function(){return Z(this,"cleanup",{platforms:["iOS"]},arguments)},n.pluginName="Camera",n.plugin="cordova-plugin-camera",n.pluginRef="navigator.camera",n.repo="https://github.com/apache/cordova-plugin-camera",n.platforms=["Android","Browser","iOS","Windows"],n.\u0275fac=function(){var e;return function(t){return(e||(e=u.n5z(n)))(t||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n}(x);function N(e,n){if(1&e&&(u.TgZ(0,"ion-item"),u._UZ(1,"img",2),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("src",e.foto,u.LSH)}}function O(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",9),u.NdJ("click",function(){return u.CHM(e),u.oxw().getFotoCamera()}),u._uU(1,"Camera"),u.qZA()}}function _(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",10),u.NdJ("click",function(){return u.CHM(e),u.oxw().getFotoGaleria()}),u._uU(1,"Galeria"),u.qZA()}}function k(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",11),u.NdJ("click",function(){return u.CHM(e),u.oxw().enviarFoto()}),u._uU(1,"Enviar Imagem"),u.qZA()}}function C(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",10),u.NdJ("click",function(){return u.CHM(e),u.oxw().cancelar()}),u._uU(1,"Cancelar"),u.qZA()}}const E=[{path:"",component:(()=>{class e{constructor(e,n,t,r,o,i){this.navCtrl=e,this.navParam=n,this.storage=t,this.clienteService=r,this.camera=o,this.loadingCtrl=i,this.cameraOn=!1,this.isLoading=!1}ngOnInit(){this.carregarDados()}carregarDados(){let e=this.storage.getLocalUser();e&&e.email?this.clienteService.encontrarPorEmail(e.email).subscribe(e=>{this.cliente=e,this.getImageIfExists()},e=>{403==e.status&&(console.log("voltando"),this.navCtrl.navigateRoot("folder/components/home"))}):this.navCtrl.navigateRoot("folder/components/home")}getImageIfExists(){this.clienteService.buscarImagemBucket(this.cliente.id).subscribe(e=>{this.cliente.imageUrl=`${s.H.bucketAWSUrl}/cp${this.cliente.id}.jpg`},e=>{})}getFotoCamera(){console.log("tirando foto..."),this.cameraOn=!0,this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,cameraDirection:1,targetWidth:720,allowEdit:!1,saveToPhotoAlbum:!1}).then(e=>{this.foto="data:image/png;base64,"+e},e=>{this.cameraOn=!1})}getFotoGaleria(){this.showLoader(),console.log("tirando foto..."),this.cameraOn=!0,this.camera.getPicture({quality:100,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.PNG,mediaType:this.camera.MediaType.PICTURE,targetWidth:720,correctOrientation:!0,cameraDirection:1,allowEdit:!0}).then(e=>{this.foto="data:image/png;base64,"+e},e=>{this.cameraOn=!1}),this.isLoading=!1}enviarFoto(){this.showLoader(),this.clienteService.uploadFoto(this.foto).subscribe(e=>{this.foto=null,this.carregarDados()},e=>{}),this.cameraOn=!1}cancelar(){this.foto=null,this.cameraOn=!1}showLoader(){return(0,c.mG)(this,void 0,void 0,function*(){this.isLoading=!0;const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Aguarde...",duration:2e4});yield e.present().then(()=>{console.log("carregando"),this.isLoading||e.dismiss().then(()=>console.log("Dismiss"))})})}}return e.\u0275fac=function(n){return new(n||e)(u.Y36(i.SH),u.Y36(i.X1),u.Y36(l.V),u.Y36(d.$),u.Y36(R),u.Y36(i.HT))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-profile"]],decls:22,vars:9,consts:[[3,"translucent"],["slot","start"],[3,"src"],[2,"text-align","center"],[1,"card-header"],[4,"ngIf"],["expand","full","color","primary",3,"click",4,"ngIf"],["expand","full","color","secondary",3,"click",4,"ngIf"],["expand","full","color","medium",3,"click",4,"ngIf"],["expand","full","color","primary",3,"click"],["expand","full","color","secondary",3,"click"],["expand","full","color","medium",3,"click"]],template:function(e,n){1&e&&(u.TgZ(0,"ion-header",0),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",1),u._UZ(3,"ion-menu-button"),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5,"Perfil"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-content"),u.TgZ(7,"ion-avatar"),u._UZ(8,"img",2),u.qZA(),u.TgZ(9,"h2",3),u._uU(10),u.qZA(),u.TgZ(11,"p",3),u._uU(12),u.qZA(),u.TgZ(13,"ion-card"),u.TgZ(14,"ion-card-header"),u.TgZ(15,"ion-card-title",4),u._uU(16,"Enviar imagem de perfil"),u.qZA(),u.qZA(),u.YNc(17,N,2,1,"ion-item",5),u.YNc(18,O,2,0,"ion-button",6),u.YNc(19,_,2,0,"ion-button",7),u.YNc(20,k,2,0,"ion-button",8),u.YNc(21,C,2,0,"ion-button",7),u.qZA(),u.qZA()),2&e&&(u.Q6J("translucent",!0),u.xp6(8),u.Q6J("src",(null==n.cliente?null:n.cliente.imageUrl)||"assets/imgs/avatar-blank.png",u.LSH),u.xp6(2),u.Oqu(null==n.cliente?null:n.cliente.nome),u.xp6(2),u.Oqu(null==n.cliente?null:n.cliente.email),u.xp6(5),u.Q6J("ngIf",n.foto),u.xp6(1),u.Q6J("ngIf",!n.foto),u.xp6(1),u.Q6J("ngIf",!n.foto),u.xp6(1),u.Q6J("ngIf",n.foto),u.xp6(1),u.Q6J("ngIf",n.foto))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.W2,i.BJ,i.PM,i.Zi,i.gZ,r.O5,i.Ie,i.YG],styles:["ion-avatar[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:100%;align-self:center;margin:25px auto 0;display:block}.card-header[_ngcontent-%COMP%]{text-align:center}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.Bz.forChild(E)],a.Bz]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[R],imports:[[r.ez,o.u5,i.Pc,U]]}),e})()}}]);